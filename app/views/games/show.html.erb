<body>
<%= render "/shared/header" %>

<div class ="m-lg-4 m-2">
  <h2><%= @game.title%></h2>
  <dl class="row">
      <dt class="col-sm-3">パブリッシャー</dt>
      <dd class="col-sm-9"><%= @game.maker%></dd>
      <dt class="col-sm-3">リリース日</dt>
      <dd class="col-sm-9"><%=@game.release_date%></dd>
      <dt class="col-sm-3">ハードウェア</dt>
      <dd class="col-sm-9">
          <% @hardwares.each do |hardware|%>
              <p><%=hardware.name%></p>
          <% end %>
      </dd>
      <dt class="col-sm-3">ジャンル</dt>
      <dd class="col-sm-9">
          <% @genres.each do |genre|%>
              <p><%=genre.name%></p>
          <% end %>
      </dd>
  </dl>

  <%if !user_signed_in? or !@reviews.exists?(user_id: current_user.id)%>
      <%=link_to 'レビュー投稿', new_game_review_path(@game), class:"btn btn-primary"%>
  <%else%>
      <%=link_to 'レビュー編集', edit_game_review_path(@game), class:"btn btn-primary"%>
      <%review = @reviews.find_by(user_id: current_user.id)%>
      <%=link_to 'レビュー削除', "#{@game.id}/reviews/#{review.id}", class:"btn btn-primary", data:{turbo_method: :delete, turbo_confirm: '本当によろしいですか?'}%>
  <%end%>

  <p></p>
  <h3>レビュー</h3>
  <div class="card">
    <div class="card-body">
      <% @reviews.each do |review|%>
        <%if review.title.present?%>
          <h4 class="card-title"><%=review.title%></h4>
        <%end%>
        <%#<h6 class="card-subtitle mb-2 text-muted"><%=review.user_id></h6>%>
        <dl class="row">
          <dt class="col-sm-3">プレイ時間</dt>
          <dd class="col-sm-9"><%= review.play_hour%></dd>
          <dt class="col-sm-3">スコア</dt>
          <dd class="col-sm-9"><%=review.score%></dd>
          <dt class="col-sm-3">良い点</dt>
          <dd class="col-sm-9"><%=review.good_point_i18n%></dd>
          <dt class="col-sm-3">悪い点</dt>
          <dd class="col-sm-9"><%=review.good_point_i18n%></dd>
        </dl>
        <h6>内容</h6>
        <p class="card-text"><%=review.body%></p>
      <% end %>
    </div>
  </div>
</div>
</body>